import React, {Component} from 'react';

export default function normalizeItems(WrapperComponent, Normalizer) {
    return class extends Component {

        static defaultProps = {
            items: [],
            onChange: () => {}
        };

        state = {
            items: [],
        };

        onChange = (event) => {
            console.log(event.target.value);
            event.target.value = Normalizer.denormalize(event.target.value);
            console.log(event.target.value);

            this.props.onChange(event);
        };

        render() {
            const normalizedItems = Normalizer.normalize(this.props.items);

            return <WrapperComponent {...this.props} onChange={this.onChange} items={normalizedItems.items} itemIds={normalizedItems.itemIds}  />
        }
    }
}
