import React, { Component } from 'react';
import Day from "components/Day/Day";
import DateWorker from "services/DateWorker";
import { appUi } from '../../../App';

class Zone extends Component {

    state = {
        active: true
    };

    getDays = () => {

        let days = [];

        for (let index = 0; index < this.props.daysCount; index++) {
            console.log(this.props.startDate.getDate());
            const date = new Date(this.props.startDate.setDate(this.props.startDate.getDate() + 1));
            const dateLocal = DateWorker.formatDate(date);
            const dateNow = DateWorker.formatDate(new Date(Date.now()));

            days.push(
                (<div key={index} className={'days-list__item'}>
                    <appUi.Consumer>
                        {(ui) => {
                        return <Day zone={this.props.zoneId}
                        date={dateLocal}
                        active={dateLocal === dateNow}
                        items={this.props.planItems}
                        appUi={ui}
                        itemsArr={this.props.planItemsArr}/>
                    }}

                    </appUi.Consumer>
                </div>)
                )
        }

        return days;
    };

    render() {
        return (
            <React.Fragment>
                <div className={`days-list__header ${this.state.active ? 'active' : 'inactive'}`}>
                    <div className={`day__title ${this.props.active ? 'active' : ''}`}>
                        {'Oбласть'}
                    </div>
                    <div className={'days-list__header-body'}>
                        {this.props.name}
                    </div>
                </div>
                {this.getDays()}
            </React.Fragment>
        );
    }
}

export default Zone;