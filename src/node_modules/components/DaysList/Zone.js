import React, { Component } from 'react';
import Day from "components/Day/Day";
import { appUi } from '../../../App';
import moment from 'moment';

class Zone extends Component {

    state = {
        active: true
    };

    getDays = () => {

        let days = [];

        const dateNow = moment(this.props.currentDate).format('DD.MM.YYYY');

        for (let index = 0; index < this.props.daysCount; index++) {

            const dateLocal = moment(this.props.startDate)
                .add(index, 'days')
                .format('DD.MM.YYYY');

            days.push(
                (<div key={index} className={'days-list__item'}>
                    <appUi.Consumer>
                        {(ui) => {
                            return <Day zone={this.props.zoneId}
                            date={dateLocal}
                            active={dateLocal === dateNow}
                            items={this.props.planItems}
                            appUi={ui}
                            itemsArr={this.props.planItemsArr}/>
                        }}
                    </appUi.Consumer>
                </div>)
                )
        }

        return days;
    };

    render() {
        return (
            <React.Fragment>
                <div className={`days-list__header ${this.state.active ? 'active' : 'inactive'}`}>
                    <div className={`day__title ${this.props.active ? 'active' : ''}`}>
                        {'Oбласть'}
                    </div>
                    <div className={'days-list__header-body'}>
                        {this.props.name}
                    </div>
                </div>
                {this.getDays()}
            </React.Fragment>
        );
    }
}

export default Zone;